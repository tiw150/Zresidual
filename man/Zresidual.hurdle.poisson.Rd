% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Zresidual.hurdle.poisson.R
\name{Zresidual.hurdle.poisson}
\alias{Zresidual.hurdle.poisson}
\title{Compute Z-Residuals for Hurdle or Count Poisson Models}
\usage{
Zresidual.hurdle.poisson(fit, type, method = "iscv", n.rep = 1)
}
\arguments{
\item{fit}{A fitted \pkg{brms} model object for a hurdle or count Poisson outcome.}

\item{type}{Character string specifying which part of the model to calculate Z-residuals for:
\code{"zero"} for the hurdle/zero portion,
\code{"count"} for the truncated Poisson counts,
\code{"hurdle"} for the full hurdle-Poisson model.}

\item{method}{Character string specifying the residual calculation method:
\code{"iscv"} for importance-sampled cross-validated randomized predictive p-values,
or \code{"rpost"} for randomized posterior predictive p-values or
\code{"mpost"} for middle-value posterior predictive p-values. Default is \code{"iscv"}.}

\item{n.rep}{Integer; the number of replicated Z-residual sets to generate. Default is 1.}
}
\value{
A numeric matrix of Z-residuals with attributes:
\itemize{
  \item \code{type}: The specified model component
  \item \code{zero_id}: Indices of zero outcomes
  \item \code{log_pmf}: Log-probability mass function values
  \item \code{log_cdf}: Log-cumulative distribution function values
  \item \code{covariates}: Model covariates
  \item \code{linear.pred}: Linear predictor values from the fitted model
}
The returned object has class \code{c("zresid", "matrix")}.
}
\description{
Computes Z-residuals for fitted Bayesian hurdle or count models
with a Poisson distribution. Z-residuals can be calculated for
zeros, counts, or the overall hurdle distribution, and can be used
for model diagnostics.
}
\details{
The function performs the following steps:
\enumerate{
  \item Extracts the observed response vector from the model data.
  \item Computes the log-PMF and log-CDF for the specified part of the model
        using the corresponding \code{log_pred_dist_*} function.
  \item Generates posterior predictive p-values according to the
        specified \code{method}.
  \item Converts the p-values to Z-residuals via the negative quantile of the
        standard normal distribution.
}

The output is a matrix of Z-residuals with one column per replication.
}
\examples{
\dontrun{
# Compute Z-residuals for counts
zres_counts <- Zresidual.hurdle.poisson(fit, type = "count", method = "iscv")

# Compute Z-residuals for the full hurdle model with 2 replicates
zres_hurdle <- Zresidual.hurdle.poisson(fit, type = "hurdle", n.rep = 2)
}

}
\seealso{
\code{\link{log_pred_dist_HP}}, \code{\link{log_pred_dist_TP}}, \code{\link{post_logrpp}}, \code{\link{iscv_logrpp}}
}
