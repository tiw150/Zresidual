% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/surv_residuals.R
\name{surv_residuals}
\alias{surv_residuals}
\title{Residuals for supported survival models}
\usage{
surv_residuals(
  fit.object,
  data,
  residual.type = c("censored Z-residual", "Cox-Snell", "martingale", "deviance")
)
}
\arguments{
\item{fit.object}{A fitted model object. Currently, only
\code{\link[survival]{coxph}} and \code{\link[survival]{survreg}} objects
are supported. Cox models may optionally include a shared frailty term
(e.g., \code{frailty(group)}).}

\item{data}{A \code{data.frame} containing the variables needed to evaluate
residuals for \code{fit.object}. It must contain the survival response and
all covariates (and, for shared frailty models, the grouping factor)
appearing in the model formula.}

\item{residual.type}{Character string specifying the type of residual to
compute. Valid values depend on the underlying model and residual
function, but for Cox models typically include:
\code{"censored Z-residual"}, \code{"Cox-Snell"},
\code{"martingale"}, and \code{"deviance"}. The default is the full
vector \code{c("censored Z-residual", "Cox-Snell", "martingale",
"deviance")}, which is typically resolved via \code{match.arg()} in the
underlying residual functions.}
}
\value{
An object containing residuals, as returned by the corresponding
lower-level function:
\itemize{
  \item \code{residual.coxph()} or \code{residual.coxph.frailty()} for
        Cox / shared frailty Cox models, or
  \item \code{residual.survreg()} for parametric survival models.
}
The basic structure (numeric vector or matrix) and attributes are preserved
from the underlying function, but the returned object is assigned an
additional class \code{"zresid"} on top of its original classes.
}
\description{
High-level wrapper to compute residuals for supported survival models,
with a unified interface. Depending on the model type and presence of a
shared frailty term, this function dispatches to:
\itemize{
  \item \code{residual.coxph()} for standard Cox proportional hazards models,
  \item \code{residual.coxph.frailty()} for shared frailty Cox models, and
  \item \code{residual.survreg()} for parametric survival models fitted
        with \code{\link[survival]{survreg}}.
}
}
\details{
This function is intended as a convenience entry point for users of the
package: it automatically routes to the appropriate residual computation
for the given model type and adds the class \code{"zresid"} to the result.
This extra class can be used by downstream plotting or diagnostic
functions (e.g., \code{plot.zresid()}).
}
\examples{
\dontrun{
  library(survival)

  ## Cox PH model
  fit_cox <- coxph(Surv(time, status) ~ age + sex, data = lung)
  r1 <- surv_residuals(fit_cox, data = lung,
                  residual.type = "censored Z-residual")

  ## Shared frailty Cox model
  lung$inst <- factor(lung$inst)
  fit_frail <- coxph(Surv(time, status) ~ age + sex + frailty(inst),
                     data = lung)
  r2 <- surv_residuals(fit_frail, data = lung,
                  residual.type = "Cox-Snell")

  ## Parametric survival model (Weibull)
  fit_weib <- survreg(Surv(time, status) ~ age + sex, data = lung,
                      dist = "weibull")
  r3 <- surv_residuals(fit_weib, data = lung,
                  residual.type = "censored Z-residual")
}
}
\seealso{
\code{\link[survival]{coxph}}, \code{\link[survival]{survreg}},
\code{residual.coxph}, \code{residual.coxph.frailty},
\code{residual.survreg}
}
